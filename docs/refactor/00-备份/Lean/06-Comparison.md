# Lean 与 Haskell/Rust 对比（Comparison）

## 1. 设计哲学对比

| 语言   | 设计哲学                   | 主要用途                   |
|--------|----------------------------|----------------------------|
| Rust   | 零成本抽象，安全并发       | 系统编程、Web、嵌入式      |
| Haskell| 纯函数式、数学抽象         | 学术、金融、编译器、建模   |
| Lean   | 形式化证明、依赖类型       | 数学证明、程序验证、编程   |

## 2. 类型系统对比

| 语言   | 类型系统           | 依赖类型 | 类型安全 | 类型推断 |
|--------|--------------------|----------|----------|----------|
| Rust   | 静态、线性、泛型   | 否       | 强       | 强       |
| Haskell| 静态、类型类、泛型 | 否       | 强       | 强       |
| Lean   | 依赖类型、宇宙层级 | 是       | 最强     | 部分     |

## 3. 语法结构对比

- **Rust**：C/ML 风格，表达式与命令式混合，宏系统强大
- **Haskell**：极简声明式，模式匹配、类型类、do 记法
- **Lean**：定理/定义声明，依赖类型，tactic 证明块，元编程

## 4. 控制流对比

| 控制结构 | Rust                | Haskell                | Lean                  |
|----------|---------------------|------------------------|-----------------------|
| 条件分支 | if/else, match      | if/then/else, guards   | if/then/else, match   |
| 循环     | for, while, loop    | 递归, map, fold        | 递归, for, do 记法    |
| 并发     | 线程、通道、async   | STM, par, async        | 有限支持(IO/Task)     |
| 异常     | Result, Option, ?   | Maybe, Either, ExceptT | Option, Except, try   |

## 5. 执行流对比

- **Rust**：严格求值，所有权模型，命令式为主
- **Haskell**：惰性求值，纯函数式，Monad 顺序化
- **Lean**：严格求值，项规约，tactic 证明流与程序流统一

## 6. 数据流对比

- **Rust**：可变/不可变借用，所有权驱动的数据流
- **Haskell**：不可变数据结构，函数组合与高阶抽象
- **Lean**：不可变、依赖类型数据流，归纳/共递归结构

## 7. 用途与生态对比

| 语言   | 主要用途                   | 生态系统规模 | 学习曲线 |
|--------|----------------------------|--------------|----------|
| Rust   | 系统/嵌入式/Web/高性能     | 大           | 中等     |
| Haskell| 学术/金融/编译器/建模      | 中           | 陡峭     |
| Lean   | 数学证明/程序验证/编程     | 小但活跃     | 陡峭     |

## 8. 代码示例对比

### 8.1 函数定义

**Rust**:

```rust
fn factorial(n: u64) -> u64 {
    match n {
        0 => 1,
        n => n * factorial(n - 1)
    }
}
```

**Haskell**:

```haskell
factorial :: Integer -> Integer
factorial 0 = 1
factorial n = n * factorial (n - 1)
```

**Lean**:

```lean
def factorial : Nat → Nat
  | 0 => 1
  | n+1 => (n+1) * factorial n
```

---

## 9. 总结

- Rust 注重工程与安全，Haskell 注重抽象与纯粹，Lean 注重形式化与证明。
- 类型系统、控制流、数据流、用途各有侧重。
- 交叉学习有助于理解现代编程与形式化理论的融合。
